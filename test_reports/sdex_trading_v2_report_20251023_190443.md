# SDEX Trading Integration Test Report (v2 Composite Tools)

**Test Run:** 2025-10-23T19:03:55.240929

**Network:** Stellar Testnet

**Horizon:** https://horizon-testnet.stellar.org

**Tools Version:** v2 (5 Composite Tools - 70% fewer tools, 70% token savings)

---

## Summary

- **Total Tests:** 16
- **Passed:** 15 ‚úÖ
- **Failed:** 1 ‚ùå
- **Success Rate:** 93.8%

---

## v2 Improvements

- **Market Buy:** 1 composite call (was 3 calls in v1: build ‚Üí sign ‚Üí submit)
- **Market Sell:** 1 composite call (was 3 calls in v1)
- **Limit Orders:** 1 composite call (was 3 calls in v1)
- **Auto-signing:** Built-in, reduces workflow complexity
- **Smart defaults:** `base_asset='XLM'`, `auto_sign=True`, market prices auto-set

---

## Test Accounts

### Account A (Buyer)
- **Account ID:** `GB2NHFGIO2XY5OGMWTD74RUHD5Y7MHVQAV7RBMQL67H675QCPH3L7UZZ`
- **Explorer:** [View on Stellar Expert](https://stellar.expert/explorer/testnet/account/GB2NHFGIO2XY5OGMWTD74RUHD5Y7MHVQAV7RBMQL67H675QCPH3L7UZZ)

### Account B (Seller)
- **Account ID:** `GCMT5IQTW7PMX56R6LR5U4GM4A4X7HALRWS3C4GKS5BLLDTE6ADIDMDE`
- **Explorer:** [View on Stellar Expert](https://stellar.expert/explorer/testnet/account/GCMT5IQTW7PMX56R6LR5U4GM4A4X7HALRWS3C4GKS5BLLDTE6ADIDMDE)

---

## Test Results

### Test 1: Create Account A

**Status:** ‚úÖ PASSED

**Details:** Account ID: GB2NHFGIO2XY5OGMWTD74RUHD5Y7MHVQAV7RBMQL67H675QCPH3L7UZZ


### Test 2: Create Account B

**Status:** ‚úÖ PASSED

**Details:** Account ID: GCMT5IQTW7PMX56R6LR5U4GM4A4X7HALRWS3C4GKS5BLLDTE6ADIDMDE


### Test 3: Fund Account A

**Status:** ‚úÖ PASSED

**Details:** Balance: 10000.0000000 XLM


### Test 4: Fund Account B

**Status:** ‚úÖ PASSED

**Details:** Balance: 10000.0000000 XLM


### Test 5: Establish Trustline A

**Status:** ‚úÖ PASSED

**Details:** Hash: f530bf3f0f361d68..., Ledger: 1212330


### Test 6: Establish Trustline B

**Status:** ‚úÖ PASSED

**Details:** Hash: 41086103564e765e..., Ledger: 1212331


### Test 7: Query Orderbook

**Status:** ‚úÖ PASSED

**Details:** Bids: 1, Asks: 10


### Test 8: Place Limit Buy Order

**Status:** ‚úÖ PASSED

**Details:** Hash: 3a351e7e3cd85010..., Ledger: 1212332 [v2: 1 call vs v1: 3 calls]


### Test 9: Place Limit Buy Order

**Status:** ‚úÖ PASSED

**Details:** Hash: fb7d9e052a1d2a62..., Ledger: 1212333 [v2: 1 call vs v1: 3 calls]


### Test 10: Check Open Orders A

**Status:** ‚úÖ PASSED

**Details:** Found 1 open order(s)


### Test 11: Check Open Orders B

**Status:** ‚úÖ PASSED

**Details:** Found 1 open order(s)


### Test 12: Cancel Order A

**Status:** ‚úÖ PASSED

**Details:** Offer 14253 cancelled, Hash: f14fcc31c3ff0601...


### Test 13: Cancel Order B

**Status:** ‚úÖ PASSED

**Details:** Offer 14254 cancelled, Hash: 7b3b78b4351ddd49...


### Test 14: Verify Cancellation

**Status:** ‚úÖ PASSED

**Details:** All orders successfully cancelled


### Test 15: Market Buy USDC

**Status:** ‚úÖ PASSED

**Details:** ‚ú® REAL TRADE EXECUTED! Acquired 0.02 USDC at 892.38 XLM/USDC [v2: 1 call vs v1: 3 calls]


### Test 16: Market Buy USDC

**Status:** ‚ùå FAILED

**Error:**
```
name 'ask_price' is not defined
```


---

## üéâ Real Market Trade Executed!

- **USDC Acquired:** 0.02
- **Trade Price:** N/A XLM/USDC
- **Execution Method:** v2 single `trading_tool(action='market_buy')` call


---


*Report generated by Stellar MCP Server v2 test suite*