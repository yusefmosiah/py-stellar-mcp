# SDEX Trading Integration Test Report (v2 Composite Tools)

**Test Run:** 2025-10-23T18:32:26.304621

**Network:** Stellar Testnet

**Horizon:** https://horizon-testnet.stellar.org

**Tools Version:** v2 (5 Composite Tools - 70% fewer tools, 70% token savings)

---

## Summary

- **Total Tests:** 15
- **Passed:** 12 ✅
- **Failed:** 3 ❌
- **Success Rate:** 80.0%

---

## v2 Improvements

- **Market Buy:** 1 composite call (was 3 calls in v1: build → sign → submit)
- **Market Sell:** 1 composite call (was 3 calls in v1)
- **Limit Orders:** 1 composite call (was 3 calls in v1)
- **Auto-signing:** Built-in, reduces workflow complexity
- **Smart defaults:** `base_asset='XLM'`, `auto_sign=True`, market prices auto-set

---

## Test Accounts

### Account A (Buyer)
- **Account ID:** `GDS5II4N4SBOXL6YD2NO2URUEGYRERIBWPYZQUNTAPU4EQ6IZMIGRNDP`
- **Explorer:** [View on Stellar Expert](https://stellar.expert/explorer/testnet/account/GDS5II4N4SBOXL6YD2NO2URUEGYRERIBWPYZQUNTAPU4EQ6IZMIGRNDP)

### Account B (Seller)
- **Account ID:** `GBL7SENV7QXMXO2WUQZG53JVKJV6TTRUQVJLV472N4NKFOYBKDJPP7LH`
- **Explorer:** [View on Stellar Expert](https://stellar.expert/explorer/testnet/account/GBL7SENV7QXMXO2WUQZG53JVKJV6TTRUQVJLV472N4NKFOYBKDJPP7LH)

---

## Test Results

### Test 1: Create Account A

**Status:** ✅ PASSED

**Details:** Account ID: GDS5II4N4SBOXL6YD2NO2URUEGYRERIBWPYZQUNTAPU4EQ6IZMIGRNDP


### Test 2: Create Account B

**Status:** ✅ PASSED

**Details:** Account ID: GBL7SENV7QXMXO2WUQZG53JVKJV6TTRUQVJLV472N4NKFOYBKDJPP7LH


### Test 3: Fund Account A

**Status:** ✅ PASSED

**Details:** Balance: 10000.0000000 XLM


### Test 4: Fund Account B

**Status:** ✅ PASSED

**Details:** Balance: 10000.0000000 XLM


### Test 5: Establish Trustline A

**Status:** ✅ PASSED

**Details:** Hash: 40ea48f3bd59fb1c..., Ledger: 1211952


### Test 6: Establish Trustline B

**Status:** ✅ PASSED

**Details:** Hash: 227695819c673ca4..., Ledger: 1211953


### Test 7: Query Orderbook

**Status:** ✅ PASSED

**Details:** Bids: 1, Asks: 9


### Test 8: Place Limit Buy Order

**Status:** ✅ PASSED

**Details:** Hash: cfadb0db3fa8b4e5..., Ledger: 1211954 [v2: 1 call vs v1: 3 calls]


### Test 9: Place Limit Sell Order

**Status:** ❌ FAILED

**Error:**
```
<Response [status_code=400, text={
  "type": "https://stellar.org/horizon-errors/transaction_failed",
  "title": "Transaction Failed",
  "status": 400,
  "detail": "The transaction failed when submitted to the stellar network. The `extras.result_codes` field on this response contains further details.  Descriptions of each code can be found at: https://developers.stellar.org/api/errors/http-status-codes/horizon-specific/transaction-failed/",
  "extras": {
    "envelope_xdr": "AAAAAgAAAABX+RG1/C7Lu1akMm7tNVJr6c40hVK68/pvGqK7AVDS9wAAAGQAEn4vAAAAAgAAAAAAAAAAAAAAAQAAAAAAAAADAAAAAVVTREMAAAAAQj59BfLsr7/sGSshWj8b6WrtuNjnAlSr40E+AgfeVrIAAAAAAAAAADuaygAAAAACAAAAAQAAAAAAAAAAAAAAAAAAAAEBUNL3AAAAQMTlItfRHkVXpGsdEhKdR9ewoFOcureuvvyp3cIB24JBTNYAILXaO8mQq1yLV+rbWUDzXNEXoRCFPAKzZPgojQ4=",
    "result_codes": {
      "transaction": "tx_failed",
      "operations": [
        "op_underfunded"
      ]
    },
    "result_xdr": "AAAAAAAAAGT/////AAAAAQAAAAAAAAAD////+QAAAAA="
  }
}, headers={'Date': 'Thu, 23 Oct 2025 22:32:52 GMT', 'Content-Type': 'application/problem+json; charset=utf-8', 'Content-Length': '938', 'Connection': 'keep-alive', 'Cache-Control': 'no-cache, no-store, max-age=0', 'Vary': 'Origin'}, url=https://horizon-testnet.stellar.org/transactions]>
```


### Test 10: Check Open Orders A

**Status:** ✅ PASSED

**Details:** Found 1 open order(s)


### Test 11: Check Open Orders B

**Status:** ✅ PASSED

**Details:** Found 0 open order(s)


### Test 12: Cancel Order A

**Status:** ✅ PASSED

**Details:** Offer 14216 cancelled, Hash: 71e66241bfef749d...


### Test 13: Cancel Order B

**Status:** ❌ FAILED

**Details:** No order to cancel

**Error:**
```
No open orders found
```


### Test 14: Verify Cancellation

**Status:** ✅ PASSED

**Details:** All orders successfully cancelled


### Test 15: Market Buy USDC

**Status:** ❌ FAILED

**Details:** Order submitted but no USDC received. Hash: e8f0209267d6394b...

**Error:**
```
Trade may not have filled
```


---


*Report generated by Stellar MCP Server v2 test suite*